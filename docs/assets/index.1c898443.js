var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,a=(e,a)=>{for(var o in a||(a={}))n.call(a,o)&&l(e,o,a[o]);if(t)for(var o of t(a))r.call(a,o)&&l(e,o,a[o]);return e};import{S as o,l as c,t as s,r as m,R as i,F as u,I as p,T as h,m as E,a as d,b as v,c as b,d as g,e as w,f as C,L as f,g as y,h as F,i as V,j as x,k as G,n as k,o as R,p as S,q as P,C as j,s as T,u as L,v as N,w as $,x as _,y as O,B as A,A as D,z as B,D as I,P as q,E as W,G as M,H,J,K as U,M as z,N as K,O as Q,Q as X,U as Y,V as Z,W as ee}from"./vendor.803b9590.js";class te{constructor(){this.valueSubject$=new o,this.disabledSubject$=new o,this.validSubject$=new o,this.dirtySubject$=new o,this.errorsSubject$=new o,this.destroy$=new o,this.destroy=()=>{this.destroy$.next(!0)},this.setErrors=e=>{c.exports.isEqual(e,this.errors)||this.errorsSubject$.next(e)},this.setValidators=e=>{this._validators=e,this.validateAndUpdateErrors()},this.disable=()=>{this.setDisabled(!0)},this.enable=()=>{this.setDisabled(!1)},this.setValid=e=>{e!==this.valid&&this.validSubject$.next(e)},this.markAsDirty=()=>{this.setDirty(!0)},this.markAsPristine=()=>{this.setDirty(!1)},this.initValue=e=>{this.updatePrivateValue(e)},this.initDisabled=e=>{this._disabled=e},this.initDirty=e=>{this._dirty=e},this.initErrors=e=>{this._errors=e},this.initValid=e=>{this._valid=e},this.initValidators=e=>{this._validators=e},this.updatePrivateValue=e=>{this._value=e},this.updatePrivateValid=e=>{this._valid=e},this.updatePrivateErrors=e=>{this._errors=e},this.updatePrivateDisabled=e=>{this._disabled=e},this.updatePrivateDirty=e=>{this._dirty=e},this.validateAndUpdateErrors=()=>{const e=re(this,this._validators);this.setErrors(e),this.setValid(this.checkValid())},this.setDisabled=e=>{e!==this.disabled&&this.disabledSubject$.next(e)},this.setDirty=e=>{e!==this.dirty&&this.dirtySubject$.next(e)}}get value(){return this._value}get errors(){return this._errors}get valid(){return this._valid}get invalid(){return!this._valid}get disabled(){return this._disabled}get enabled(){return!this._disabled}get dirty(){return this._dirty}get pristine(){return!this._dirty}get valueChange(){return this.valueSubject$.asObservable().pipe(s(this.destroy$))}get errorsChange(){return this.errorsSubject$.asObservable().pipe(s(this.destroy$))}get disabledChange(){return this.disabledSubject$.asObservable().pipe(s(this.destroy$))}get dirtyChange(){return this.dirtySubject$.asObservable().pipe(s(this.destroy$))}get validChange(){return this.validSubject$.asObservable().pipe(s(this.destroy$))}initBasicParams(e,{disabled:t=!1,dirty:n=!1,validators:r=[],autoMarkAsDirty:l=!0}){this.initValue(e),this.initValidators(r),this.initDisabled(t),this.initDirty(n),this.initErrors(re(this,r)),this.initValid(this.checkValid()),this.validChange.subscribe(this.updatePrivateValid),this.errorsChange.subscribe(this.updatePrivateErrors),this.disabledChange.subscribe(this.updatePrivateDisabled),this.dirtyChange.subscribe(this.updatePrivateDirty),this.valueChange.subscribe(this.updatePrivateValue),this.valueChange.subscribe(this.validateAndUpdateErrors),l&&this.valueChange.subscribe(this.markAsDirty)}}class ne extends te{constructor(e,t={}){super(),this.setValue=e=>{e!==this.value&&this.valueSubject$.next(e)},this.reset=()=>{this.setValue(this._initValue)},this.checkValid=()=>!this.errors,this._initValue=e,this.initBasicParams(e,t)}}const re=(e,t)=>{const n=t.reduce(((t,n)=>{const r=n(e);return r&&(t=a(a({},t),r)),t}),{});return c.exports.isEmpty(n)?null:n},le=e=>e instanceof te?e:new ne(...e),ae=(e,t)=>{const n=m.exports.useRef(!1);m.exports.useEffect((()=>{if(n.current)return e();n.current=!0}),t)},oe=e=>{const[t,n]=m.exports.useState(e.value);return m.exports.useEffect((()=>{const t=e.valueChange.subscribe(n);return()=>{t.unsubscribe()}}),[e]),ae((()=>{n(e.value)}),[e]),t},ce=e=>{const[t,n]=m.exports.useState(e.disabled);return m.exports.useEffect((()=>{const t=e.disabledChange.subscribe(n);return()=>{t.unsubscribe()}}),[e]),ae((()=>{n(e.disabled)}),[e]),t},se=e=>{const[t,n]=m.exports.useState(e.dirty);return m.exports.useEffect((()=>{const t=e.dirtyChange.subscribe(n);return()=>{t.unsubscribe()}}),[e]),ae((()=>{n(e.dirty)}),[e]),t},me=e=>{const[t,n]=m.exports.useState(e.valid);return m.exports.useEffect((()=>{const t=e.validChange.subscribe(n);return()=>{t.unsubscribe()}}),[e]),ae((()=>{n(e.valid)}),[e]),t},ie=e=>{const[t,n]=m.exports.useState(e.errors);return m.exports.useEffect((()=>{const t=e.errorsChange.subscribe(n);return()=>{t.unsubscribe()}}),[e]),ae((()=>{n(e.errors)}),[e]),t},ue=e=>{const[t,n]=m.exports.useState(e.controls);return m.exports.useEffect((()=>{const t=e.controlsChange.subscribe(n);return()=>{t.unsubscribe()}}),[e]),ae((()=>{n(e.controls)}),[e]),t},pe=i.createContext(null);function he(e){const{children:t}=e,n=m.exports.useContext(pe),{name:r,control:l}=function(e){return void 0!==e.name}(e)?{name:e.name,control:n.get(e.name)}:{control:e.control};if(!(l instanceof ne))throw new Error("props error:Field can only receive FieldControl as control");const a=oe(l),o=ce(l),c=se(l),s=me(l),i=ie(l);return t({name:r,value:a,control:l,setValue:l.setValue,markAsDirty:l.markAsDirty,markAsPristine:l.markAsPristine,errors:i,disabled:o,enabled:!o,valid:s,invalid:!s,dirty:c,pristine:!c})}const Ee=()=>{const e=m.exports.useRef(new ne(""));return i.createElement(he,{control:e.current},(({value:e,setValue:t})=>i.createElement(u.Item,{label:"Ant Design"},i.createElement(p,{value:e,onChange:e=>t(e.target.value)}))))},de=()=>{const e=m.exports.useRef(new ne(""));return i.createElement(he,{control:e.current},(({value:e,setValue:t})=>i.createElement(h,{label:"material-ui",value:e,onChange:e=>t(e.target.value)})))};class ve extends te{constructor(e,t={}){super(),this.controlsSubject=new o,this.get=e=>this._controls[e],this.setValue=e=>{this.destroyGraph(),this.setValueToControls(e),this.valueSubject$.next(this.getGroupValueFromControls()),this.validSubject$.next(this.checkValid()),this.resetGraph()},this.reset=()=>{this.destroyGraph(),Object.values(this.controls).forEach((e=>e.reset())),this.valueSubject$.next(this.getGroupValueFromControls()),this.validSubject$.next(this.checkValid()),this.resetGraph()},this.add=(e,t)=>{if(this.controls[e])return void console.warn(`already has control named ${e} in formGroup`);const n=Object.assign({},this.controls,{[e]:le(t)});this.controlsSubject.next(n)},this.remove=e=>{if(!this.controls[e])return void console.warn(`cannot find control named ${e} in formGroup`);const t=Object.assign({},this.controls);delete t[e],this.controlsSubject.next(t)},this.checkValid=()=>!(this.errors||Object.values(this._controls).some((e=>e.invalid))),this.initControls=e=>{const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n],l=le(r);l.parent=this,t[n]=l}this._controls=t},this.setValueToControls=e=>{Object.keys(this._controls).forEach((t=>{Object.prototype.hasOwnProperty.call(e,t)&&this._controls[t].setValue(e[t])}))},this.updatePrivateControlsAndResetSubscribeGraph=e=>{this.updatePrivateControls(e),this.valueSubject$.next(this.getGroupValueFromControls()),this.resetGraph()},this.updatePrivateControls=e=>{this._controls=e},this.getGroupValueFromControls=()=>{const e={};return Object.keys(this._controls).forEach((t=>{const n=this._controls[t];n.enabled&&(e[t]=n.value)})),e},this.resetGraph=()=>{const e=Object.values(this._controls),t=e.map((e=>e.valueChange)),n=e.map((e=>e.validChange)),r=e.map((e=>e.disabledChange));this.resetValueGraph([...t,...r]),this.resetValidGraph(n)},this.destroyGraph=()=>{this.valueChangesSubscription&&this.valueChangesSubscription.unsubscribe(),this.validChangesSubscription&&this.validChangesSubscription.unsubscribe()},this.resetValidGraph=e=>{this.validChangesSubscription&&this.validChangesSubscription.unsubscribe(),this.validChangesSubscription=E(...e).pipe(s(this.destroy$),d((()=>this.checkValid()))).subscribe(this.setValid)},this.initControls(e),this.initBasicParams(this.getGroupValueFromControls(),t),this.resetGraph(),this.controlsChange.subscribe(this.updatePrivateControlsAndResetSubscribeGraph)}get controls(){return this._controls}get controlsChange(){return this.controlsSubject.asObservable().pipe(s(this.destroy$))}resetValueGraph(e){this.valueChangesSubscription&&this.valueChangesSubscription.unsubscribe(),this.valueChangesSubscription=E(...e).pipe(s(this.destroy$),d((()=>this.getGroupValueFromControls()))).subscribe((e=>{this.valueSubject$.next(e)}))}}const be=e=>{const{children:t}=e,n=m.exports.useContext(pe),{name:r,control:l}=(e=>void 0!==e.name)(e)?{name:e.name,control:n.get(e.name)}:{control:e.control};if(!(l instanceof ve))throw new Error("props error:Group can only receive GroupControl as control");const a=oe(l),o=ce(l),c=se(l),s=me(l),u={name:r,value:a,disabled:o,enabled:!o,errors:ie(l),valid:s,invalid:!s,dirty:c,pristine:!c,controls:ue(l)};return i.createElement(pe.Provider,{value:l},t(u))},ge=new ve({married:["unmarried"],spouse:["",{disabled:!0}]}),we=ge.get("married"),Ce=ge.get("spouse");we.valueChange.subscribe((e=>{"married"===e?Ce.enable():(Ce.setValue(""),Ce.disable())}));const fe=()=>i.createElement(be,{control:ge},(()=>i.createElement(i.Fragment,null,i.createElement(v,{component:"legend"},"婚姻状况"),i.createElement(he,{name:"married"},(({value:e,setValue:t})=>i.createElement(i.Fragment,null,i.createElement(b,{value:e,onChange:e=>{t(e.target.value)}},i.createElement(g,{value:"unmarried",control:i.createElement(w,null),label:"未婚"}),i.createElement(g,{value:"married",control:i.createElement(w,null),label:"已婚"}))))),i.createElement("br",null),i.createElement(he,{name:"spouse"},(({value:e,setValue:t,disabled:n})=>i.createElement(h,{label:"配偶姓名",disabled:n,value:e,onChange:e=>t(e.target.value)}))))));const ye=()=>{const e=m.exports.useRef(new ne(""));return m.exports.useEffect((()=>{const t=e.current.valueChange.pipe(C(500)).subscribe((e=>{console.log("value change",e)}));return()=>{t.unsubscribe()}}),[]),i.createElement(he,{control:e.current},(({value:e,setValue:t})=>i.createElement(h,{label:"防抖500ms",value:e,onChange:e=>t(e.target.value)})))},Fe=()=>i.createElement("main",{className:"home"},i.createElement("div",{className:"banner"},i.createElement("img",{src:"/react-observable-form/assets/rx.18995810.png",className:"rxImg"}),i.createElement("img",{src:"/react-observable-form/assets/react.7f55f92c.svg",className:"reactImg"}),i.createElement("nav",null,i.createElement("div",null,i.createElement(f,{className:"link",to:"/quick-start"},"文档"),i.createElement("a",{className:"link",href:"https://github.com/RxJS-CN",target:"_blank",rel:"noreferrer"},"RxJS 中文社区")),i.createElement("div",null,i.createElement("a",{href:"https://github.com/vickmeng/react-observable-form"},i.createElement(y,null)))),i.createElement("h1",null,"React Observable Form"),i.createElement("h2",null,"可自由订阅状态变化的React响应式表单方案"),i.createElement("div",null,i.createElement(f,{className:"quick-start link",to:"/quick-start"},"快速开始"))),i.createElement("section",null,i.createElement("h2",null,"自由订阅"),i.createElement("p",null,"随时随处订阅表单元素状态变化"),i.createElement("img",{src:"/react-observable-form/assets/flow.1c028861.png",width:500})),i.createElement("section",null,i.createElement("h2",null,"RxJs"),i.createElement("p",null,"享受RxJs所有Operators"),i.createElement("div",{className:"demo-wrapper"},i.createElement("div",{className:"code"},i.createElement(F,{language:"javascript",style:V},'valueChange\n.pipe(debounceTime(500))\n.subscribe((v) => {\n  console.log("value change", v);\n});')),i.createElement("div",{className:"demo"},i.createElement(ye,null)))),i.createElement("section",null,i.createElement("h2",null,"友好集成"),i.createElement("p",null,"自由桥接流行的组件库"),i.createElement("div",{className:"third"},i.createElement("div",{className:"third--demo antd"},i.createElement(Ee,null)),i.createElement("div",{className:"divide vertical"}),i.createElement("div",{className:"third--demo mui"},i.createElement(de,null)))),i.createElement("section",null,i.createElement("h2",null,"响应式"),i.createElement("p",null,"响应式表单，状态驱动动态逻辑"),i.createElement("div",{className:"demo-wrapper"},i.createElement("div",{className:"code"},i.createElement(F,{language:"javascript",style:V},'const group = new GroupControl({\n  married: ["unmarried"],\n  spouse: ["", { disabled: true }],\n});\n\nconst married = group.get("married");\nconst spouse = group.get("spouse");\n\nmarried.valueChange.subscribe((v) => {\n  if (v === "married") {\n    spouse.enable();\n  } else {\n    spouse.setValue("");\n    spouse.disable();\n  }\n});')),i.createElement("div",{className:"demo"},i.createElement(fe,null)))),i.createElement("footer",null,"遵循 MIT 开源协议    Copyright © Rxjs-CN")),Ve=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"快速开始"),i.createElement(x,{paragraph:!0,variant:"h4"},"环境准备"),i.createElement(x,{paragraph:!0},"请确保使用 v16.8及更高版本的react"),i.createElement(x,{paragraph:!0,variant:"h4"},"安装"),i.createElement(F,{language:"javascript",style:V},"yarn add rxjs react-observable-form\n\nor\n\nnpm install rxjs react-observable-form"));const xe={title:"基础使用",routes:[{text:"单一元素",link:"/field"},{text:"群组",link:"/group"},{text:"列表",link:"/list"},{text:"校验",link:"/validate"}]},Ge={title:"高级使用",routes:[{text:"订阅变化",link:"/subscribe"},{text:"动态表单",link:"/dynamic"},{text:"联合校验",link:"/uniteValidate"},{text:"复杂嵌套",link:"/nest"},{text:"与Rxjs",link:"/useRx"}]},ke={title:"API",routes:[{text:"<Field/>",link:"fieldApi"},{text:"<Group/>",link:"groupApi"},{text:"<List/>",link:"listApi"},{text:"<Error/>",link:"errorApi"},{text:"FieldControl",link:"fieldControlApi"},{text:"GroupControl",link:""},{text:"ListControl",link:""}]},Re=({menu:e})=>{const[t,n]=m.exports.useState(!1);return i.createElement(i.Fragment,null,i.createElement(k,{button:!0,onClick:()=>{n(!t)}},i.createElement(R,{primary:e.title}),t?i.createElement(S,null):i.createElement(P,null)),i.createElement(j,{in:t,timeout:"auto",unmountOnExit:!0},i.createElement(G,{component:"div",disablePadding:!0,className:"submenu--list"},e.routes.map((e=>i.createElement(f,{to:e.link,key:e.text},i.createElement(k,{button:!0,className:"nested"},i.createElement(R,{primary:e.text}))))))))},Se=()=>i.createElement("aside",{className:"menu"},i.createElement(G,{component:"nav","aria-labelledby":"nested-list-subheader"},i.createElement(f,{to:"/"},i.createElement(k,{button:!0},i.createElement(R,{primary:"首页"}))),i.createElement(f,{to:"/quick-start"},i.createElement(k,{button:!0},i.createElement(R,{primary:"快速开始"}))),i.createElement(f,{to:"/core"},i.createElement(k,{button:!0},i.createElement(R,{primary:"核心概念"}))),i.createElement(Re,{menu:xe}),i.createElement(Re,{menu:Ge}),i.createElement(Re,{menu:ke}),i.createElement(f,{to:"/resources"},i.createElement(k,{button:!0},i.createElement(R,{primary:"更多选择"}))))),Pe=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"核心概念"),i.createElement(x,{paragraph:!0},"react-observable-form主要包含两个概念：Controller与Component。"),i.createElement(x,{paragraph:!0,variant:"h4"},"Controllers"),i.createElement(x,{paragraph:!0},"Controller是数据的源头，它为视图提供一系列可观察对象，以及操作数据的方法，使用者可以通过订阅这些可观察对象获得如：value，errors等状态。"),i.createElement(x,{paragraph:!0},"我们有如下三种class创建Controller："),i.createElement(x,{paragraph:!0},i.createElement("ul",null,i.createElement("li",null,"FieldControl：用以创建单一元素的控制器"),i.createElement("li",null,"GroupControl：用以创建群组元素的控制器"),i.createElement("li",null,"ListControl：用以创建列表元素的控制器"))),i.createElement(x,{paragraph:!0,variant:"h4"},"Components"),i.createElement(x,{paragraph:!0},"就是React组件，作为Controller的订阅者，可以获取其订阅的Controller的值向下传递，也提供方法让下级组件将状态上传，从而实现受控组件。"),i.createElement(x,{paragraph:!0},"我们有如下三种Components："),i.createElement(x,{paragraph:!0},i.createElement("ul",null,i.createElement("li",null," ","<Field/>","：FieldControl的订阅器"),i.createElement("li",null," ","<Group/>","：GroupControl的订阅器"),i.createElement("li",null," ","<List/>","：ListControl的订阅器"))),i.createElement("br",null),i.createElement(x,{paragraph:!0},"可以查看",i.createElement(f,{to:"/field"},"基础使用"),"更直观得进行学习")),je=({children:e})=>i.createElement(F,{language:"typescript",style:V},e),Te=e=>{const[t,n]=i.useState(!1);return i.createElement(T,null,i.createElement(L,null,e.demo),i.createElement(N,{disableSpacing:!0},i.createElement($,{onClick:()=>{n(!t)},"aria-expanded":t,"aria-label":"show more"},i.createElement(_,{color:t?"primary":"inherit"}))),i.createElement(j,{in:t,timeout:"auto",unmountOnExit:!0},i.createElement(L,null,i.createElement(je,null,e.code))))},Le=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"单一元素"),i.createElement(x,{paragraph:!0},"我们用Field指代单一元素，它是最小的数据源。往往绑定一个单独的受控组件，比如一个输入框，一个树形选择器。"),i.createElement(x,{paragraph:!0},"首先，我们创建一个FieldController作为数据源。"),i.createElement(x,{paragraph:!0},"兵无常势，水无常形。",i.createElement("b",null,"你可以根据需要把FieldController放在任何一个可方便获取的位置,可以是组件外，","<Context/>","中，或者各种状态管理工具，但请避免重复创造实例。")," ","本例中我们放在useRef里。"),i.createElement(je,null,'const controlRef = useRef(new FieldControl<string>(""));'),i.createElement("br",null),i.createElement(x,{paragraph:!0},"FieldControl接受两个参数，第一个参数是默认值，第二个参数是其他初始化配置。可以在",i.createElement(f,{to:"/"},"API"),"中获取更多信息。接下来利用","<Field/>","订阅FieldController。"),i.createElement(je,null,"<Field control={controlRef.current}></Field>"),i.createElement("br",null),i.createElement(x,{paragraph:!0},"将FieldController传入","<Field/>","，","<Field/>","会在初始化时自动订阅FieldController的状态，同时在销毁时取消订阅。"),i.createElement(x,{paragraph:!0},"接下来，将","<Field/>","得到的数据传递给视图"),i.createElement(je,null,'<Field control={controlRef.current}>\n    {({ value, setValue }) => {\n        return <TextField label="material-ui" value={value} onChange={(e) => setValue(e.target.value)} />;\n    }}\n</Field>'),i.createElement("br",null),i.createElement(x,{paragraph:!0},"<Field/>","接受函数作为children，向下传递状态与控制状态的方法。本例将value传入给视图组件，并暴露setValue方法，提供修改value的能力。",i.createElement("b",null,"如果使用者觉得这个函数有些啰嗦，开发团队期待你使用如HOC等任何的编程技巧简化代码。")),i.createElement("br",null),i.createElement(x,{paragraph:!0},"本例采用material-ui作为视图库。完整代码如下："),i.createElement(Te,{code:'import { useRef } from "react";\nimport { TextField } from "@material-ui/core";\nimport { Field, FieldControl } from "react-observable-form";\n\nexport const BasicWithMui = () => {\n  const controlRef = useRef(new FieldControl<string>(""));\n\n  return (\n    <Field control={controlRef.current}>\n      {({ value, setValue }) => {\n        return <TextField label="material-ui" value={value} onChange={(e) => setValue(e.target.value)} />;\n      }}\n    </Field>\n  );\n};\n',demo:i.createElement(de,null)}));class Ne extends te{constructor(e,t={}){super(),this.controlsSubject=new o,this.controlsChangeNotifyLock=!1,this.get=e=>this._controls[+e],this.insert=(e,...t)=>{const n=[...this.controls],r=t.map((e=>le(e)));n.splice(e,0,...r),this.controlsSubject.next(n)},this.push=(...e)=>{this.insert(this.controls.length,...e)},this.remove=(e,t=1)=>{const n=[...this.controls];n.splice(e,t),this.controlsSubject.next(n)},this.setValue=e=>{this.destroyGraph(),this.setValueToControls(e),this.valueSubject$.next(this.getListValueFromControls()),this.validSubject$.next(this.checkValid()),this.resetGraph()},this.reset=()=>{this.destroyGraph(),this.controls.forEach((e=>e.reset())),this.valueSubject$.next(this.getListValueFromControls()),this.validSubject$.next(this.checkValid()),this.resetGraph()},this.checkValid=()=>!(this.errors||this._controls.some((e=>e.invalid))),this.initControls=e=>{this._controls=e.map((e=>{const t=le(e);return t.parent=this,t}))},this.setValueToControls=e=>{this._controls.forEach(((t,n)=>{Object.prototype.hasOwnProperty.call(e,n)&&t.setValue(e[n])}))},this.updatePrivateControlsAndResetSubscribeGraph=e=>{this.updatePrivateControls(e),this.valueSubject$.next(this.getListValueFromControls()),this.resetGraph()},this.updatePrivateControls=e=>{this._controls=e},this.getListValueFromControls=()=>{const e=[];return Object.keys(this._controls).forEach(((t,n)=>{const r=this._controls[n];r.enabled&&(e[n]=r.value)})),e},this.resetGraph=()=>{const e=this._controls.map((e=>e.valueChange)),t=this._controls.map((e=>e.validChange)),n=this._controls.map((e=>e.disabledChange));this.resetValueGraph([...e,...n]),this.resetValidGraph(t)},this.destroyGraph=()=>{this.valueChangesSubscription&&this.valueChangesSubscription.unsubscribe(),this.validChangesSubscription&&this.validChangesSubscription.unsubscribe()},this.resetValidGraph=e=>{this.validChangesSubscription&&this.validChangesSubscription.unsubscribe(),this.validChangesSubscription=E(...e).pipe(s(this.destroy$),O((()=>this.controlsChangeNotifyLock)),d((()=>this.checkValid()))).subscribe(this.setValid)},this.initControls(e),this.initBasicParams(this.getListValueFromControls(),t),this.resetGraph(),this.controlsChange.subscribe(this.updatePrivateControlsAndResetSubscribeGraph)}get controls(){return this._controls}get controlsChange(){return this.controlsSubject.asObservable().pipe(s(this.destroy$))}resetValueGraph(e){this.valueChangesSubscription&&this.valueChangesSubscription.unsubscribe(),this.valueChangesSubscription=E(...e).pipe(s(this.destroy$),O((()=>this.controlsChangeNotifyLock)),d((()=>this.getListValueFromControls()))).subscribe((e=>{this.valueSubject$.next(e)}))}}const $e=e=>{const{children:t}=e,n=m.exports.useContext(pe),{name:r,control:l}=(e=>void 0!==e.name)(e)?{name:e.name,control:n.get(e.name)}:{control:e.control};if(!(l instanceof Ne))throw new Error("props error:List can only receive ListControl as control");const a=oe(l),o=ce(l),c=se(l),s=me(l),u={name:r,value:a,disabled:o,enabled:!o,errors:ie(l),valid:s,invalid:!s,dirty:c,pristine:!c,controls:ue(l)};return i.createElement(pe.Provider,{value:l},t(u))},_e=e=>{const{children:t}=e,n=m.exports.useContext(pe),{name:r,control:l}=function(e){return void 0!==e.name}(e)?{name:e.name,control:n.get(e.name)}:{control:e.control},a=se(l);return t({name:r,errors:ie(l),dirty:a,pristine:!a})};const Oe=e=>{return null==(t=e.value)||0===t.length?{required:!0}:null;var t},Ae=()=>{const e=m.exports.useRef(new ve({consignee:["Vick"],address:["No.1,Chaowai Street,Chaoyang District,Beijing City"]}));return m.exports.useEffect((()=>{const t=e.current.valueChange.subscribe((e=>{console.log("value changed",e)}));return()=>{t.unsubscribe()}}),[]),i.createElement(be,{control:e.current},(t=>i.createElement(i.Fragment,null,i.createElement(he,{name:"consignee"},(({value:e,setValue:t})=>i.createElement(h,{label:"consignee",variant:"outlined",value:e,onChange:e=>t(e.target.value)}))),i.createElement("br",null),i.createElement("br",null),i.createElement(he,{name:"address"},(({value:e,setValue:t})=>i.createElement(h,{label:"address",variant:"outlined",multiline:!0,maxRows:14,value:e,onChange:e=>t(e.target.value)}))),i.createElement("br",null),i.createElement("br",null),i.createElement(A,{variant:"contained",color:"primary",onClick:()=>{console.log(e.current.value)}},"在控制台中打印数据"))))},De=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"群组"),i.createElement(x,{paragraph:!0},"我们用Group指代群组，它是由name为key，以其他controller为value组成的hash型数据源，一张表单往往就是一个Group。"),i.createElement(x,{paragraph:!0},'我们现在创建一个包含"consignee"，"address"两个参数的群组。过程和创建单一元素是很接近的。'),i.createElement(x,{paragraph:!0},'首先，我们创造一个GroupController，其中包含"consignee"，"address"两个key，我们为这两个属性赋予两个FieldController, GroupController会自动订阅下级的Controllers:'),i.createElement(je,null,'  const groupControlRef = useRef(\n    new GroupControl({\n      consignee: new FieldControl("vick"),\n      address: new FieldControl("No.1,Chaowai Street,Chaoyang District,Beijing City"),\n    })\n  );'),i.createElement(x,{paragraph:!0},"也可以采用简写形式:"),i.createElement(je,null,' const groupControlRef = useRef(\n    new GroupControl({\n      consignee: ["vick"],\n      address: ["No.1,Chaowai Street,Chaoyang District,Beijing City"],\n    })\n  );'),i.createElement(x,{paragraph:!0},"然后，利用","<Group/>","订阅GroupController"),i.createElement(je,null,"<Group control={groupControlRef.current}>\n    {(props) => {\n        return (\n          <>\n             //TODO\n          </>\n        );\n      }}\n</Group>"),i.createElement(x,{paragraph:!0},"至此Group的工作完成，接下来要将Group的Controller与视图关联。 由于本例中的Group包含的Controller均为FieldController， 我们采用","<Field/>","与其匹配，更复杂的例子可在",i.createElement(f,{to:"/"},"高级使用"),"中查看"),i.createElement(x,{paragraph:!0},"<Field/>","可以通过name可以匹配外部GroupController的下级Controller"),i.createElement(je,null,'<Group control={groupControlRef.current}>\n      {(props) => {\n        return (\n          <>\n            <Field name="consignee">\n              {({ value, setValue }) => {\n                return (\n                  <TextField\n                    label="consignee"\n                    variant="outlined"\n                    value={value}\n                    onChange={(e) => setValue(e.target.value)}\n                  />\n                );\n              }}\n            </Field>\n\n            <br />\n            <br />\n\n            <Field name="address">\n              {({ value, setValue }) => {\n                return (\n                  <TextField\n                    label="address"\n                    variant="outlined"\n                    multiline\n                    maxRows={14}\n                    value={value}\n                    onChange={(e) => setValue(e.target.value)}\n                  />\n                );\n              }}\n            </Field>\n          </>\n        );\n      }}\n    </Group>'),i.createElement(je,null,'<Field name="consignee"/> 相当于 <Field control="一个FieldController"/>'),i.createElement(x,{paragraph:!0},"<Field/>","完整例子如下"),i.createElement(Te,{demo:i.createElement(Ae,null),code:'import React, { useRef } from "react";\nimport { TextField } from "@material-ui/core";\nimport { Field, Group, GroupControl } from "react-observable-form";\n\nconst GroupDemo = () => {\n  // const groupControlRef = useRef(\n  //   new GroupControl({\n  //     consignee: new FieldControl("vick"),\n  //     address: new FieldControl("No.1,Chaowai Street,Chaoyang District,Beijing City"),\n  //   })\n  // );\n\n  const groupControlRef = useRef(\n    new GroupControl({\n      consignee: ["vick"],\n      address: ["No.1,Chaowai Street,Chaoyang District,Beijing City"],\n    })\n  );\n\n  return (\n    <Group control={groupControlRef.current}>\n      {(props) => {\n        return (\n          <>\n            <Field name="consignee">\n              {({ value, setValue }) => {\n                return (\n                  <TextField\n                    label="consignee"\n                    variant="outlined"\n                    value={value}\n                    onChange={(e) => setValue(e.target.value)}\n                  />\n                );\n              }}\n            </Field>\n\n            <Field name="address">\n              {({ value, setValue }) => {\n                return (\n                  <TextField\n                    label="address"\n                    variant="outlined"\n                    multiline\n                    maxRows={14}\n                    value={value}\n                    onChange={(e) => setValue(e.target.value)}\n                  />\n                );\n              }}\n            </Field>\n            <Button\n              variant="contained"\n              color={"primary"}\n              onClick={() => {\n                console.log(groupControlRef.current.value);\n              }}\n            >\n              打印数据\n            </Button>\n          </>\n        );\n      }}\n    </Group>\n  );\n};'}));const Be=()=>{const e=m.exports.useRef(new Ne([["Vick"],["Tom"],["Jack"],["Lulu"]]));return i.createElement(i.Fragment,null,i.createElement("ul",{className:"list-demo__ul"},i.createElement($e,{control:e.current},(e=>{var l=e,{controls:a}=l;((e,l)=>{var a={};for(var o in e)n.call(e,o)&&l.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&t)for(var o of t(e))l.indexOf(o)<0&&r.call(e,o)&&(a[o]=e[o])})(l,["controls"]);return i.createElement(i.Fragment,null,a.map(((e,t)=>i.createElement("li",{key:`key${t}`},i.createElement(D,null,t+1),i.createElement(he,{name:`${t}`},(({value:e,setValue:t})=>i.createElement(h,{label:"姓名",value:e,onChange:e=>t(e.target.value)})))))))}))),i.createElement(A,{variant:"contained",color:"primary",onClick:()=>{console.log(e.current.value)}},"在控制台中打印数据"))},Ie=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"列表"),i.createElement(x,{paragraph:!0},"我们用List指代列表，与Group的用法很接近，它是由index为key，以其他controller为value组成的数组型数据源。"),i.createElement(x,{paragraph:!0},"我们直接用一个例子进行描述："),i.createElement(Te,{demo:i.createElement(Be,null),code:'import React, { useRef } from "react";\nimport { Avatar, Button, TextField } from "@material-ui/core";\nimport { Field,ListControl,List } from "react-observable-form";\nimport "./index.less";\n\nconst ListDemo = () => {\n  const controlRef = useRef(new ListControl([["Vick"], ["Tom"], ["Jack"], ["Lulu"]]));\n\n  return (\n    <>\n      <ul className="list-demo__ul">\n        <List control={controlRef.current}>\n          {({ controls, ...rest }) => {\n            return (\n              <>\n                {controls.map((control, i) => {\n                  return (\n                    <li key={`key${i}`}>\n                      <Avatar>{i + 1}</Avatar>\n                      <Field name={`${i}`}>\n                        {({ value, setValue }) => {\n                          return <TextField label="姓名" value={value} onChange={(e) => setValue(e.target.value)} />;\n                        }}\n                      </Field>\n                    </li>\n                  );\n                })}\n              </>\n            );\n          }}\n        </List>\n      </ul>\n\n      <Button\n        variant="contained"\n        color={"primary"}\n        onClick={() => {\n          console.log(controlRef.current.value);\n        }}\n      >\n        在控制台中打印数据\n      </Button>\n    </>\n  );\n};'})),qe=()=>{const e=m.exports.useRef(new ne("这是一条过长的姓名",{dirty:!0,validators:[Oe,(t=4,e=>{return null!=(n=e.value)&&"number"==typeof n.length&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null;var n})]}));var t;return i.createElement(i.Fragment,null,i.createElement(he,{control:e.current},(({value:e,setValue:t,dirty:n,errors:r})=>i.createElement(i.Fragment,null,i.createElement(h,{variant:"outlined",label:"姓名",error:Boolean(n&&r),value:e,onChange:e=>t(e.target.value)})))),i.createElement(_e,{control:e.current},(({dirty:e,errors:t})=>i.createElement(i.Fragment,null,e&&i.createElement(i.Fragment,null,(null==t?void 0:t.required)&&i.createElement(B,{error:!0},"请填写姓名"),(null==t?void 0:t.maxlength)&&i.createElement(B,{error:!0},"姓名不可大于",t.maxlength.requiredLength,"位，当前为",t.maxlength.actualLength,"位"))))))},We=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"校验"),i.createElement(x,{paragraph:!0},"我们可以在初始化时通过validators参数为controller设计校验规则，也可以通过controller暴露的setValidators方法方法动态修改校验规则。 controller会根据validators的顺序依次进行校验，我们可以在",i.createElement(f,{to:"/"},"动态表单"),"中了解更多内容。"),i.createElement(x,{paragraph:!0},"validators接受一组符合ValidatorFn类型的方法，开发者可以由此定义校验规则，同时,react-observable-form也为开发者准备了一些常用的校验方法可供参考与是用,",i.createElement("a",null,"可在此处查看"),"。这部分实现大量的参考了@angular/core的forms模块。"),i.createElement(x,{paragraph:!0},"为了让不同类型组件职能更单纯，我们提供了专门的","<Errors/>","组件处理错误信息，也可以在其他任意的组件中消费错误，如下："),i.createElement(Te,{demo:i.createElement(qe,null),code:'import React, { useRef } from "react";\nimport { TextField, FormHelperText } from "@material-ui/core";\n\nimport { maxLengthValidator, requiredValidator } from "react-observable-form/validators";\nimport { Error,Field,FieldControl } from "react-observable-form";\n\nexport const ValidateDemo = () => {\n  const controlRef = useRef(\n    new FieldControl("这是一条过长的姓名", { dirty: true, validators: [requiredValidator, maxLengthValidator(4)] })\n  );\n\n  return (\n    <>\n      <Field control={controlRef.current}>\n        {({ value, setValue, dirty, errors }) => {\n          return (\n            <>\n              <TextField\n                variant="outlined"\n                label={"姓名"}\n                // 同样可以在<Field/>中消费errors\n                error={Boolean(dirty && errors)}\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </>\n          );\n        }}\n      </Field>\n      <Error control={controlRef.current}>\n        {({ dirty, errors }) => {\n          return (\n            <>\n              {dirty && (\n                <>\n                  {errors?.required && <FormHelperText error>请填写姓名</FormHelperText>}\n\n                  {errors?.maxlength && (\n                    <FormHelperText error>\n                      姓名不可大于{errors.maxlength.requiredLength}位，当前为{errors.maxlength.actualLength}位\n                    </FormHelperText>\n                  )}\n                </>\n              )}\n            </>\n          );\n        }}\n      </Error>\n    </>\n  );\n};'})),Me=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"动态表单"),i.createElement(x,{paragraph:!0},"controller提供了大量的方法对对状态进行控制，我们可以通过调用这些方法实现动态表单效果。"),i.createElement(x,{paragraph:!0},"试想一个场景，我们设计一个婚姻状况的调查问卷。如果是已婚人士，需要填写配偶的姓名，否则清空配偶姓名栏目，并禁止输入。思路如下："),i.createElement(x,{paragraph:!0},"首先我们从GroupController中获取婚姻状况的FieldController，并订阅其变化。"),i.createElement(x,{paragraph:!0},"当发现婚姻状况变为未婚时，获取配偶姓名的FieldController。通过setValue方法将value清空，再通过disable将其禁用，反之，利用enable方法将其开放使用。效果如下："),i.createElement(Te,{demo:i.createElement(fe,null),code:'import React from "react";\nimport { FormControlLabel, FormLabel, Radio, RadioGroup, TextField } from "@material-ui/core";\nimport { GroupControl,Field,Group } from "react-observable-form";\n\nconst group = new GroupControl({\n  married: ["unmarried"],\n  spouse: ["", { disabled: true }],\n});\n\nconst married = group.get("married");\nconst spouse = group.get("spouse");\n\nmarried.valueChange.subscribe((v) => {\n  if (v === "married") {\n    spouse.enable();\n  } else {\n    spouse.setValue("");\n    spouse.disable();\n  }\n});\n\nexport const DisableDemo = () => {\n  return (\n    <Group control={group}>\n      {() => {\n        return (\n          <>\n            <FormLabel component="legend">婚姻状况</FormLabel>\n            <Field name="married">\n              {({ value, setValue }) => {\n                return (\n                  <>\n                    <RadioGroup\n                      value={value}\n                      onChange={(e) => {\n                        setValue(e.target.value);\n                      }}\n                    >\n                      <FormControlLabel value="unmarried" control={<Radio />} label="未婚" />\n                      <FormControlLabel value="married" control={<Radio />} label="已婚" />\n                    </RadioGroup>\n                  </>\n                );\n              }}\n            </Field>\n\n            <br />\n\n            <Field name="spouse">\n              {({ value, setValue, disabled }) => {\n                return (\n                  <TextField\n                    label="配偶姓名"\n                    disabled={disabled}\n                    value={value}\n                    onChange={(e) => setValue(e.target.value)}\n                  />\n                );\n              }}\n            </Field>\n          </>\n        );\n      }}\n    </Group>\n  );\n};\n'})),He=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"订阅变化"),i.createElement(x,{paragraph:!0},"让开发者自由订阅表单状态变化是开发react-observable-form的初衷，react-observable-form使用Rxjs提供订阅功能。 开发者可以订阅value，disabled，dirty，errors，validate等等不同的状态变化并作出响应。 比如对表单元素进行操作，以达到动态表单的效果，再比如，表单某个值发生变化时实时发送请求。"),i.createElement(x,{paragraph:!0},"我们仍然以group为例，controller提供valueChange提供开发者进行对value变化的订阅。此处完全使用Rxjs的api， 如果你对Rxjs并不了解，也并不会影响你的使用。更多的可订阅对象请在",i.createElement(f,{to:"/"},"API"),"中了解。"),i.createElement(x,{paragraph:!0},"如果开发者觉得订阅valueChange很麻烦，建议自行封装hook简化逻辑，",i.createElement("b",null,"但是你一定要清楚Rxjs做了什么"),"。"),i.createElement(x,{paragraph:!0},"请打开控制台查看value变化："),i.createElement(Te,{demo:i.createElement(Ae,null),code:'import React, { useEffect, useRef } from "react";\nimport { Button, TextField } from "@material-ui/core";\n\nimport { Field, Group, GroupControl } from "react-observable-forms";\n\nconst GroupDemo = () => {\n  const groupControlRef = useRef(\n    new GroupControl({\n      consignee: ["Vick"],\n      address: ["No.1,Chaowai Street,Chaoyang District,Beijing City"],\n    })\n  );\n\n  useEffect(() => {\n    const subscription = groupControlRef.current.valueChange.subscribe((v) => {\n      console.log("value changed", v);\n    });\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  return (\n    <Group control={groupControlRef.current}>\n      {(props) => {\n        return (\n          <>\n            <Field name="consignee">\n              {({ value, setValue }) => {\n                return (\n                  <TextField\n                    label="consignee"\n                    variant="outlined"\n                    value={value}\n                    onChange={(e) => setValue(e.target.value)}\n                  />\n                );\n              }}\n            </Field>\n\n            <Field name="address">\n              {({ value, setValue }) => {\n                return (\n                  <TextField\n                    label="address"\n                    variant="outlined"\n                    multiline\n                    maxRows={14}\n                    value={value}\n                    onChange={(e) => setValue(e.target.value)}\n                  />\n                );\n              }}\n            </Field>\n\n            <Button\n              variant="contained"\n              color={"primary"}\n              onClick={() => {\n                console.log(groupControlRef.current.value);\n              }}\n            >\n              在控制台中打印数据\n            </Button>\n          </>\n        );\n      }}\n    </Group>\n  );\n};\n'})),Je=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"更多选择"),i.createElement(x,{paragraph:!0},"React社区中还有非常多优秀作品值得关注："),i.createElement(x,{paragraph:!0},i.createElement("ul",null,i.createElement("li",null,i.createElement("a",{href:"https://www.react-hook-form.com"},"react-hook-form")),i.createElement("li",null,i.createElement("a",{href:"https://www.npmjs.com/package/react-final-form"},"react-final-form")),i.createElement("li",null,i.createElement("a",{href:"https://www.npmjs.com/package/formik"},"formik")),i.createElement("li",null,i.createElement("a",{href:"https://v2.formilyjs.org/"},"formily"))))),Ue=new ve({passWord:["",{validators:[Oe]}],confirmPassWord:["",{validators:[Oe]}]},{validators:[e=>e.value.confirmPassWord===e.value.passWord?null:{confirmPassword:!0}]}),ze=e=>{var t;return i.createElement(i.Fragment,null,e.dirty&&(null==(t=e.errors)?void 0:t.required)&&i.createElement(B,{error:!0},"必填项"))},Ke=()=>i.createElement(i.Fragment,null,i.createElement(be,{control:Ue},(e=>i.createElement(i.Fragment,null,i.createElement(he,{name:"passWord"},(({value:e,setValue:t})=>i.createElement(h,{label:"密码",variant:"outlined",value:e,onChange:e=>t(e.target.value)}))),i.createElement(_e,{name:"passWord"},ze),i.createElement("br",null),i.createElement("br",null),i.createElement(he,{name:"confirmPassWord"},(({value:e,setValue:t})=>i.createElement(h,{label:"再次确认密码",variant:"outlined",value:e,onChange:e=>t(e.target.value)}))),i.createElement(_e,{name:"confirmPassWord"},ze)))),i.createElement(_e,{control:Ue},(e=>{var t;return i.createElement(i.Fragment,null,e.dirty&&(null==(t=e.errors)?void 0:t.confirmPassword)&&i.createElement(B,{error:!0},"两次密码不一致"))}))),Qe=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"联合校验"),i.createElement(x,{paragraph:!0},"说一个经典的场景：注册账号的时候往往需要输入两次密码以免输入失误。当我两次输入的密码不一致的时候，是不能通过校验的。"),i.createElement(x,{paragraph:!0},"此时,第一条密码没有问题，第二条密码也没有问题，但是两条密码组合在一起就出错了。"),i.createElement(x,{paragraph:!0},"那么我们要在更上层的Group中对这两条密码进行校验。实现如下："),i.createElement(Te,{demo:i.createElement(Ke,null),code:'import React from "react";\nimport { TextField, FormHelperText } from "@material-ui/core";\n\nimport { Error,ErrorInternalProps, Field, Group, GroupControl,ValidatorFn } from "react-observable-form";\nimport { requiredValidator } from "react-observable-form/validators";\n\ninterface FormValue {\n  passWord: string;\n  confirmPassWord: string;\n}\n\nconst confirmPasswordValidator: ValidatorFn<FormValue> = (control) => {\n  return control.value.confirmPassWord === control.value.passWord ? null : { confirmPassword: true };\n};\n\nconst formGroup = new GroupControl(\n  {\n    passWord: ["", { validators: [requiredValidator] }],\n    confirmPassWord: ["", { validators: [requiredValidator] }],\n  },\n  { validators: [confirmPasswordValidator] }\n);\n\nconst RequiredErrorMessage = (props: ErrorInternalProps) => (\n  <>{props.dirty && props.errors?.required && <FormHelperText error>{"必填项"}</FormHelperText>}</>\n);\n\nconst UnitValidateDemo = () => {\n  return (\n    <>\n      <Group control={formGroup}>\n        {(props) => {\n          return (\n            <>\n              <Field name="passWord">\n                {({ value, setValue }) => {\n                  return (\n                    <TextField\n                      label="密码"\n                      variant="outlined"\n                      value={value}\n                      onChange={(e) => setValue(e.target.value)}\n                    />\n                  );\n                }}\n              </Field>\n              <Error name="passWord">{RequiredErrorMessage}</Error>\n\n              <br />\n              <br />\n\n              <Field name="confirmPassWord">\n                {({ value, setValue }) => {\n                  return (\n                    <TextField\n                      label="再次确认密码"\n                      variant="outlined"\n                      value={value}\n                      onChange={(e) => setValue(e.target.value)}\n                    />\n                  );\n                }}\n              </Field>\n              <Error name="confirmPassWord">{RequiredErrorMessage}</Error>\n            </>\n          );\n        }}\n      </Group>\n\n      <Error control={formGroup}>\n        {(props) => (\n          <>{props.dirty && props.errors?.confirmPassword && <FormHelperText error>两次密码不一致</FormHelperText>}</>\n        )}\n      </Error>\n    </>\n  );\n};'}));const Xe=()=>new ve({name:[""],tel:[""]}),Ye=()=>{const e=m.exports.useRef(new ve({name:["",{validators:[Oe]}],familyMembers:new Ne([Xe()],{validators:[Oe]})}));return i.createElement(i.Fragment,null,i.createElement(be,{control:e.current},(t=>i.createElement(i.Fragment,null,i.createElement(x,{variant:"h6"},"本人："),i.createElement(he,{name:"name"},(({value:e,setValue:t})=>i.createElement(h,{label:"本人姓名",value:e,onChange:e=>t(e.target.value)}))),i.createElement("br",null),i.createElement("br",null),i.createElement(x,{variant:"h6"},"家庭成员："),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"姓名"),i.createElement(J,null,"联系电话"),i.createElement(J,null,"操作"))),i.createElement(U,null,i.createElement($e,{name:"familyMembers"},(({controls:t})=>i.createElement(i.Fragment,null,t.map(((t,n)=>i.createElement(be,{name:`${n}`,key:`${n}`},(()=>i.createElement(H,null,i.createElement(J,null,i.createElement(he,{name:"name"},(({value:e,setValue:t})=>i.createElement(h,{label:"姓名",value:e,onChange:e=>t(e.target.value)})))),i.createElement(J,null,i.createElement(he,{name:"tel"},(({value:e,setValue:t})=>i.createElement(h,{label:"联系电话",value:e,onChange:e=>t(e.target.value)})))),i.createElement(J,null,i.createElement(A,{color:"primary",onClick:()=>{e.current.get("familyMembers").remove(n)}},"删除"))))))))))))),i.createElement(_e,{name:"familyMembers"},(({errors:e,dirty:t})=>i.createElement(i.Fragment,null,(null==e?void 0:e.required)&&i.createElement(B,{error:!0},"至少填一名家庭成员")))),i.createElement("br",null),i.createElement(A,{variant:"contained",color:"primary",onClick:()=>{e.current.get("familyMembers").push(Xe())}},"加一名成员")))),i.createElement("br",null),i.createElement("br",null),i.createElement(A,{variant:"contained",color:"primary",onClick:()=>{console.log(e.current.value)}},"在控制台中打印数据"))},Ze=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"复杂嵌套"),i.createElement(x,{paragraph:!0},"我们在基础使用中尝试过将Field嵌入Group与List，事实上不止Field，Group/List也可以作为Group/List的子Controller， 我们可以基于此作出更复杂的设计。"),i.createElement(x,{paragraph:!0},"试想一个场景：我们做一张统计家庭成员的表单，需要填写本人姓名，动态添加家庭成员，每个家庭成员需要填写姓名与联系电话。我们设计出如下的嵌套关系："),i.createElement("img",{src:"/react-observable-form/assets/nest.41279d1e.png",width:600}),i.createElement(x,{paragraph:!0},"实现如下："),i.createElement(Te,{demo:i.createElement(Ye,null),code:'import React, { useRef } from "react";\nimport { Button, FormHelperText, Table, TableBody, TableCell, TableHead, TableRow, TextField } from "@material-ui/core";\n\nimport { Error,List,Field,ListControl,GroupControl,Group } from "react-observable-form";\nimport { requiredValidator } from "react-observable-form/validators";\n\nconst createFamilyMemberGroup = () => {\n  return new GroupControl({\n    name: [""],\n    tel: [""],\n  });\n};\n\nconst NestedDemo = () => {\n  const fromGroupRef = useRef(\n    new GroupControl({\n      name: ["", { validators: [requiredValidator] }],\n      familyMembers: new ListControl([createFamilyMemberGroup()], {\n        validators: [requiredValidator],\n      }),\n    })\n  );\n\n  return (\n    <>\n      <Group control={fromGroupRef.current}>\n        {(v) => (\n          <>\n            <Field name="name">\n              {({ value, setValue }) => {\n                return <TextField label="本人姓名" value={value} onChange={(e) => setValue(e.target.value)} />;\n              }}\n            </Field>\n            <br />\n            <br />\n            家庭成员：\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>姓名</TableCell>\n                  <TableCell>联系电话</TableCell>\n                  <TableCell>操作</TableCell>\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                <List name="familyMembers">\n                  {({ controls }) => {\n                    return (\n                      <>\n                        {controls.map((control, i) => {\n                          return (\n                            <Group name={`${i}`} key={`${i}`}>\n                              {() => {\n                                return (\n                                  <TableRow>\n                                    <TableCell>\n                                      <Field name="name">\n                                        {({ value, setValue }) => {\n                                          return (\n                                            <TextField\n                                              label="姓名"\n                                              value={value}\n                                              onChange={(e) => setValue(e.target.value)}\n                                            />\n                                          );\n                                        }}\n                                      </Field>\n                                    </TableCell>\n                                    <TableCell>\n                                      <Field name="tel">\n                                        {({ value, setValue }) => {\n                                          return (\n                                            <TextField\n                                              label="联系电话"\n                                              value={value}\n                                              onChange={(e) => setValue(e.target.value)}\n                                            />\n                                          );\n                                        }}\n                                      </Field>\n                                    </TableCell>\n                                    <TableCell>\n                                      <Button\n                                        color="primary"\n                                        onClick={() => {\n                                          fromGroupRef.current.get<ListControl>("familyMembers").remove(i);\n                                        }}\n                                      >\n                                        删除\n                                      </Button>\n                                    </TableCell>\n                                  </TableRow>\n                                );\n                              }}\n                            </Group>\n                          );\n                        })}\n                      </>\n                    );\n                  }}\n                </List>\n              </TableBody>\n            </Table>\n            <Error name="familyMembers">\n              {({ errors, dirty }) => (\n                <>{errors?.required && <FormHelperText error>至少填一名家庭成员</FormHelperText>}</>\n              )}\n            </Error>\n            <br />\n            <Button\n              variant="contained"\n              color="primary"\n              onClick={() => {\n                fromGroupRef.current.get<ListControl>("familyMembers").push(createFamilyMemberGroup());\n              }}\n            >\n              加一名成员\n            </Button>\n          </>\n        )}\n      </Group>\n      <br />\n      <br />\n      <Button\n        variant="contained"\n        color="primary"\n        onClick={() => {\n          console.log(fromGroupRef.current.value);\n        }}\n      >\n        在控制台中打印数据\n      </Button>\n    </>\n  );\n};\n\nexport default NestedDemo;\n'})),et=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"与Rxjs"),i.createElement(x,{paragraph:!0},"Controller提供的每一个可订阅对象都是Rxjs提供的Subscription，我们可以使用Rxjs Operators协助处理数据流。"),i.createElement(x,{paragraph:!0},"举个例子，利用debounceTime对搜索框进行防抖处理，请在控制台中查看效果："),i.createElement(Te,{demo:i.createElement(ye,null),code:"1"})),tt=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"<Field<V> ...props/>"),i.createElement(x,{paragraph:!0,variant:"h4"},"props:","FieldProps<V>"),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"参数"),i.createElement(J,null,"说明"),i.createElement(J,null,"类型"),i.createElement(J,null,"必需"),i.createElement(J,null,"默认"))),i.createElement(U,null,i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"name"),i.createElement(J,{component:"th",scope:"row"},"字段名，与control互斥"),i.createElement(J,{component:"th",scope:"row"},"string"),i.createElement(J,{component:"th",scope:"row"},"否"),i.createElement(J,{component:"th",scope:"row"},"-")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"control"),i.createElement(J,{component:"th",scope:"row"},"绑定的controller，与name互斥"),i.createElement(J,{component:"th",scope:"row"},"FieldControl<V = any>"),i.createElement(J,{component:"th",scope:"row"},"否"),i.createElement(J,{component:"th",scope:"row"},"-")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"children"),i.createElement(J,{component:"th",scope:"row"},"内容"),i.createElement(J,{component:"th",scope:"row"},"(props: ",i.createElement("a",{href:"#fieldInternalProps"},"FieldInternalProps<V>"),") ","=>"," ReactElement"),i.createElement(J,{component:"th",scope:"row"},"是"),i.createElement(J,{component:"th",scope:"row"},"-"))))),i.createElement("br",null),i.createElement(x,{paragraph:!0,variant:"h4",id:"fieldInternalProps"},"FieldInternalProps<V>"),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"参数"),i.createElement(J,null,"说明"),i.createElement(J,null,"类型"))),i.createElement(U,null,i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"name"),i.createElement(J,{component:"th",scope:"row"},"字段名"),i.createElement(J,{component:"th",scope:"row"},"string?")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"value"),i.createElement(J,{component:"th",scope:"row"},"值"),i.createElement(J,{component:"th",scope:"row"},"<V>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"setValue"),i.createElement(J,{component:"th",scope:"row"},"更新值"),i.createElement(J,{component:"th",scope:"row"},'FieldControl<V>["setValue"]')),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"markAsDirty"),i.createElement(J,{component:"th",scope:"row"},"标记值未被修改过"),i.createElement(J,{component:"th",scope:"row"},'FieldControl<V>["markAsDirty"]')),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"markAsPristine"),i.createElement(J,{component:"th",scope:"row"},"标记值被修改过"),i.createElement(J,{component:"th",scope:"row"},'FieldControl<V>["markAsPristine"]')),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"pristine"),i.createElement(J,{component:"th",scope:"row"},"值未被修改过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"dirty"),i.createElement(J,{component:"th",scope:"row"},"值被修改过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"disabled"),i.createElement(J,{component:"th",scope:"row"},"被禁用"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"enabled"),i.createElement(J,{component:"th",scope:"row"},"未被禁用"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"valid"),i.createElement(J,{component:"th",scope:"row"},"通过校验"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"invalid"),i.createElement(J,{component:"th",scope:"row"},"未通过校验"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"errors"),i.createElement(J,{component:"th",scope:"row"},"错误描述"),i.createElement(J,{component:"th",scope:"row"},"{[key: string]: any}  |  null")))))),nt=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"<Group ...props/>"),i.createElement(x,{paragraph:!0,variant:"h4"},"props:","GroupProps"),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"参数"),i.createElement(J,null,"说明"),i.createElement(J,null,"类型"),i.createElement(J,null,"必需"),i.createElement(J,null,"默认"))),i.createElement(U,null,i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"name"),i.createElement(J,{component:"th",scope:"row"},"字段名，与control互斥"),i.createElement(J,{component:"th",scope:"row"},"string"),i.createElement(J,{component:"th",scope:"row"},"否"),i.createElement(J,{component:"th",scope:"row"},"-")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"control"),i.createElement(J,{component:"th",scope:"row"},"绑定的controller，与name互斥"),i.createElement(J,{component:"th",scope:"row"},"GroupControl"),i.createElement(J,{component:"th",scope:"row"},"否"),i.createElement(J,{component:"th",scope:"row"},"-")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"children"),i.createElement(J,{component:"th",scope:"row"},"内容"),i.createElement(J,{component:"th",scope:"row"},"(props: ",i.createElement("a",{href:"#GroupInternalProps"},"GroupInternalProps"),") ","=>"," ReactElement"),i.createElement(J,{component:"th",scope:"row"},"是"),i.createElement(J,{component:"th",scope:"row"},"-"))))),i.createElement("br",null),i.createElement(x,{paragraph:!0,variant:"h4",id:"GroupInternalProps"},"GroupInternalProps"),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"参数"),i.createElement(J,null,"说明"),i.createElement(J,null,"类型"))),i.createElement(U,null,i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"name"),i.createElement(J,{component:"th",scope:"row"},"字段名"),i.createElement(J,{component:"th",scope:"row"},"string?")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"value"),i.createElement(J,{component:"th",scope:"row"},"值"),i.createElement(J,{component:"th",scope:"row"},"Record<string, any>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"pristine"),i.createElement(J,{component:"th",scope:"row"},"值未被修改过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"dirty"),i.createElement(J,{component:"th",scope:"row"},"值被修改过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"disabled"),i.createElement(J,{component:"th",scope:"row"},"被禁用"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"enabled"),i.createElement(J,{component:"th",scope:"row"},"未被禁用"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"valid"),i.createElement(J,{component:"th",scope:"row"},"通过校验"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"invalid"),i.createElement(J,{component:"th",scope:"row"},"未通过校验"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"errors"),i.createElement(J,{component:"th",scope:"row"},"错误描述"),i.createElement(J,{component:"th",scope:"row"},"{[key: string]: any}  |  null")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"controls"),i.createElement(J,{component:"th",scope:"row"},"子controller集合"),i.createElement(J,{component:"th",scope:"row"},"{\n  [key: string]: AbstractControl<any>;\n}")))))),rt=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"<List ...props/>"),i.createElement(x,{paragraph:!0,variant:"h4"},"props:","ListProps"),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"参数"),i.createElement(J,null,"说明"),i.createElement(J,null,"类型"),i.createElement(J,null,"必需"),i.createElement(J,null,"默认"))),i.createElement(U,null,i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"name"),i.createElement(J,{component:"th",scope:"row"},"字段名，与control互斥"),i.createElement(J,{component:"th",scope:"row"},"string"),i.createElement(J,{component:"th",scope:"row"},"否"),i.createElement(J,{component:"th",scope:"row"},"-")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"control"),i.createElement(J,{component:"th",scope:"row"},"绑定的controller，与name互斥"),i.createElement(J,{component:"th",scope:"row"},"ListControl"),i.createElement(J,{component:"th",scope:"row"},"否"),i.createElement(J,{component:"th",scope:"row"},"-")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"children"),i.createElement(J,{component:"th",scope:"row"},"内容"),i.createElement(J,{component:"th",scope:"row"},"(props: ",i.createElement("a",{href:"#ListInternalProps"},"ListInternalProps"),") ","=>"," ReactElement"),i.createElement(J,{component:"th",scope:"row"},"是"),i.createElement(J,{component:"th",scope:"row"},"-"))))),i.createElement("br",null),i.createElement(x,{paragraph:!0,variant:"h4",id:"ListInternalProps"},"ListInternalProps"),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"参数"),i.createElement(J,null,"说明"),i.createElement(J,null,"类型"))),i.createElement(U,null,i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"name"),i.createElement(J,{component:"th",scope:"row"},"字段名"),i.createElement(J,{component:"th",scope:"row"},"string?")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"value"),i.createElement(J,{component:"th",scope:"row"},"值"),i.createElement(J,{component:"th",scope:"row"},"Record<string, any>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"pristine"),i.createElement(J,{component:"th",scope:"row"},"值未被修改过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"dirty"),i.createElement(J,{component:"th",scope:"row"},"值被修改过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"disabled"),i.createElement(J,{component:"th",scope:"row"},"被禁用"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"enabled"),i.createElement(J,{component:"th",scope:"row"},"未被禁用"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"valid"),i.createElement(J,{component:"th",scope:"row"},"通过校验"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"invalid"),i.createElement(J,{component:"th",scope:"row"},"未通过校验"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"errors"),i.createElement(J,{component:"th",scope:"row"},"错误描述"),i.createElement(J,{component:"th",scope:"row"},"{[key: string]: any}  |  null")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"controls"),i.createElement(J,{component:"th",scope:"row"},"子controller集合"),i.createElement(J,{component:"th",scope:"row"},"AbstractControl<any>[]")))))),lt=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"<Error<V> ...props/>"),i.createElement(x,{paragraph:!0,variant:"h4"},"props:","FieldProps<V>"),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"参数"),i.createElement(J,null,"说明"),i.createElement(J,null,"类型"),i.createElement(J,null,"必需"),i.createElement(J,null,"默认"))),i.createElement(U,null,i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"name"),i.createElement(J,{component:"th",scope:"row"},"字段名，与control互斥"),i.createElement(J,{component:"th",scope:"row"},"string"),i.createElement(J,{component:"th",scope:"row"},"否"),i.createElement(J,{component:"th",scope:"row"},"-")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"control"),i.createElement(J,{component:"th",scope:"row"},"绑定的controller，与name互斥"),i.createElement(J,{component:"th",scope:"row"},"FieldControl<V = any>"),i.createElement(J,{component:"th",scope:"row"},"否"),i.createElement(J,{component:"th",scope:"row"},"-")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"children"),i.createElement(J,{component:"th",scope:"row"},"内容"),i.createElement(J,{component:"th",scope:"row"},"(props: ",i.createElement("a",{href:"#ErrorInternalProps"},"ErrorInternalProps"),") ","=>"," ReactElement"),i.createElement(J,{component:"th",scope:"row"},"是"),i.createElement(J,{component:"th",scope:"row"},"-"))))),i.createElement("br",null),i.createElement(x,{paragraph:!0,variant:"h4",id:"ErrorInternalProps"},"ErrorInternalProps"),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"参数"),i.createElement(J,null,"说明"),i.createElement(J,null,"类型"))),i.createElement(U,null,i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"name"),i.createElement(J,{component:"th",scope:"row"},"字段名"),i.createElement(J,{component:"th",scope:"row"},"string?")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"pristine"),i.createElement(J,{component:"th",scope:"row"},"值未被修改过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"dirty"),i.createElement(J,{component:"th",scope:"row"},"值被修改过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"errors"),i.createElement(J,{component:"th",scope:"row"},"错误描述"),i.createElement(J,{component:"th",scope:"row"},"{[key: string]: any}  |  null")))))),at=()=>i.createElement("div",{className:"page"},i.createElement(x,{paragraph:!0,variant:"h2"},"Class FieldControl<V>"),i.createElement(x,{paragraph:!0,variant:"h4"},"Constructor"),i.createElement(x,{paragraph:!0,variant:"h4"},"属性"),i.createElement(I,{component:q},i.createElement(W,null,i.createElement(M,null,i.createElement(H,null,i.createElement(J,null,"参数"),i.createElement(J,null,"说明"),i.createElement(J,null,"类型"))),i.createElement(U,null,i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"value"),i.createElement(J,{component:"th",scope:"row"},"（只读）值"),i.createElement(J,{component:"th",scope:"row"},"<V>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"errors"),i.createElement(J,{component:"th",scope:"row"},"（只读）错误"),i.createElement(J,{component:"th",scope:"row"},"{[key: string]: any} | null")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"valid"),i.createElement(J,{component:"th",scope:"row"},"（只读）校验通过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"invalid"),i.createElement(J,{component:"th",scope:"row"},"（只读）校验未通过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"disabled"),i.createElement(J,{component:"th",scope:"row"},"（只读）禁用"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"enabled"),i.createElement(J,{component:"th",scope:"row"},"（只读）可用"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"dirty"),i.createElement(J,{component:"th",scope:"row"},"（只读）被污染过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"pristine"),i.createElement(J,{component:"th",scope:"row"},"（只读）未被污染过"),i.createElement(J,{component:"th",scope:"row"},"boolean")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"valueChange"),i.createElement(J,{component:"th",scope:"row"},"（只读）订阅值变化的可订阅对象"),i.createElement(J,{component:"th",scope:"row"},"Observable<V>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"errorsChange"),i.createElement(J,{component:"th",scope:"row"},"（只读）订阅错误变化的可订阅对象"),i.createElement(J,{component:"th",scope:"row"},"Observable<{[key: string]: any} | null>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"disabledChange"),i.createElement(J,{component:"th",scope:"row"},"（只读）订阅禁用状态变化的可订阅对象"),i.createElement(J,{component:"th",scope:"row"},"Observable<boolean>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"dirtyChange"),i.createElement(J,{component:"th",scope:"row"},"（只读）订阅污染状态变化的可订阅对象"),i.createElement(J,{component:"th",scope:"row"},"Observable<boolean>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"validChange"),i.createElement(J,{component:"th",scope:"row"},"（只读）订阅校验状态变化的可订阅对象"),i.createElement(J,{component:"th",scope:"row"},"Observable<boolean>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"validChange"),i.createElement(J,{component:"th",scope:"row"},"（只读）订阅校验状态变化的可订阅对象"),i.createElement(J,{component:"th",scope:"row"},"Observable<boolean>")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"setValue"),i.createElement(J,{component:"th",scope:"row"},"更新值的方法"),i.createElement(J,{component:"th",scope:"row"},"(value:V)=>void")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"setErrors"),i.createElement(J,{component:"th",scope:"row"},"更新错误的方法"),i.createElement(J,{component:"th",scope:"row"},"(value:{[key: string]: any} | null)=>void")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"setValidators"),i.createElement(J,{component:"th",scope:"row"},"更新校验规则的方法"),i.createElement(J,{component:"th",scope:"row"},"(validators:ValidatorFn[])=>void")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"disable"),i.createElement(J,{component:"th",scope:"row"},"设置为禁用的方法"),i.createElement(J,{component:"th",scope:"row"},"()=>void")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"enable"),i.createElement(J,{component:"th",scope:"row"},"设置为未禁用的方法"),i.createElement(J,{component:"th",scope:"row"},"()=>void")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"setValid"),i.createElement(J,{component:"th",scope:"row"},"更新校验状态的方法"),i.createElement(J,{component:"th",scope:"row"},"(valid:boolean)=>void")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"markAsDirty"),i.createElement(J,{component:"th",scope:"row"},"更新为被污染的方法"),i.createElement(J,{component:"th",scope:"row"},"()=>void")),i.createElement(H,null,i.createElement(J,{component:"th",scope:"row"},"markAsPristine"),i.createElement(J,{component:"th",scope:"row"},"更新未被污染的方法"),i.createElement(J,{component:"th",scope:"row"},"()=>void")))))),ot=new ve({consignee:["",{validators:[Oe]}],address:["No.1,Chaowai Street,Chaoyang District,Beijing City"]});ot.valueChange.subscribe((e=>{console.log(e)}));const ct=()=>i.createElement(be,{control:ot},(e=>i.createElement(i.Fragment,null,i.createElement(he,{name:"consignee"},(({value:e,setValue:t})=>i.createElement(h,{label:"consignee",variant:"outlined",value:e,onChange:e=>t(e.target.value)}))),i.createElement("br",null),i.createElement("br",null),i.createElement(he,{name:"address"},(({value:e,setValue:t})=>i.createElement(h,{label:"address",variant:"outlined",multiline:!0,maxRows:14,value:e,onChange:e=>t(e.target.value)}))),i.createElement("br",null),i.createElement("br",null),i.createElement(A,{variant:"contained",color:"primary",onClick:()=>{ot.setValue({consignee:"consignee",address:"address"})}},"set"),i.createElement(A,{variant:"contained",color:"primary",onClick:()=>{ot.reset()}},"reset"),i.createElement(A,{variant:"contained",color:"primary",onClick:()=>{console.log(ot)}},"在控制台中打印数据"))));function st(){const e=z();return i.createElement("div",{className:"App"},"/"!==e.pathname&&i.createElement(Se,null),i.createElement("div",{className:"content"},i.createElement(K,null,i.createElement(Q,{exact:!0,path:"/",component:Fe}),i.createElement(Q,{path:"/quick-start",component:Ve}),i.createElement(Q,{path:"/core",component:Pe}),i.createElement(Q,{path:"/field",component:Le}),i.createElement(Q,{path:"/group",component:De}),i.createElement(Q,{path:"/list",component:Ie}),i.createElement(Q,{path:"/validate",component:We}),i.createElement(Q,{path:"/subscribe",component:He}),i.createElement(Q,{path:"/dynamic",component:Me}),i.createElement(Q,{path:"/resources",component:Je}),i.createElement(Q,{path:"/uniteValidate",component:Qe}),i.createElement(Q,{path:"/nest",component:Ze}),i.createElement(Q,{path:"/useRx",component:et}),i.createElement(Q,{path:"/fieldApi",component:tt}),i.createElement(Q,{path:"/groupApi",component:nt}),i.createElement(Q,{path:"/listApi",component:rt}),i.createElement(Q,{path:"/errorApi",component:lt}),i.createElement(Q,{path:"/fieldControlApi",component:at}),i.createElement(Q,{path:"/playGround",component:ct}))))}const mt=X({palette:{primary:{main:"#4c00b7"},secondary:{main:"#4c00b7"}},typography:{h2:{color:"#4c00b7",fontWeight:100,fontSize:42},h4:{fontWeight:100},body1:{fontWeight:100,textIndent:32}}});Y.render(i.createElement(i.StrictMode,null,i.createElement(Z,{theme:mt},i.createElement(ee,{basename:"/react-observable-form"},i.createElement(st,null)))),document.getElementById("root"));
