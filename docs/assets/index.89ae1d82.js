import{R as e,t,l as n,m as r,s as o,a,S as i,r as s,B as l,L as u,b as c,c as b,d}from"./vendor.ce457584.js";var f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=function(e,t){var r=t.reduce((function(t,n){var r=n(e);return r&&(t=p(p({},t),r)),t}),{});return n.exports.isEmpty(r)?null:r},g=function(e,t,n){var r=s.exports.useState(t),o=r[0],a=r[1];return s.exports.useEffect((function(){var e=n.subscribe(a);return function(){e.unsubscribe()}}),[e]),o},y=e.createContext(null),m=function(e){var t=e.children,n=s.exports.useContext(y),r=function(e){return void 0!==e.name}(e)?{name:e.name,control:n.get(e.name)}:{control:e.control},o=r.name,a=void 0===o?void 0:o,i=r.control,l=g(i,i.value,i.valueChange),u=g(i,i.enabled,i.enabledChange),c=g(i,i.valid,i.validChange),b=g(i,i.errors,i.errorsChange);return t({name:a,value:l,setValue:i.setValue,errors:b,disabled:!u,enabled:u,valid:c,invalid:!c})},C=function(){function e(){var e=this;this.valueSubject$=new i,this.enabledSubject$=new i,this.validSubject$=new i,this.errorsSubject$=new i,this.destroy$=new i,this.destroy=function(){e.destroy$.next(!0)},this.setErrors=function(t){n.exports.isEqual(t,e.errors)||e.errorsSubject$.next(t)},this.setValidators=function(t){e._validators=t,e.validateAndUpdateErrors(e.value)},this.disable=function(){e.setEnabled(!1)},this.enable=function(){e.setEnabled(!0)},this.setValid=function(t){t!==e.valid&&e.validSubject$.next(t)},this.initValue=function(t){e.updatePrivateValue(t)},this.initEnabled=function(t){e._enabled=t},this.initErrors=function(t){e._errors=t},this.initValid=function(t){e._valid=t},this.initValidators=function(t){e._validators=t},this.updatePrivateValue=function(t){e._value=t},this.updatePrivateValid=function(t){e._valid=t},this.updatePrivateErrors=function(t){e._errors=t},this.updatePrivateEnabledStatus=function(t){e._enabled=t},this.validateAndUpdateErrors=function(t){var n=h(t,e._validators);e.setErrors(n),e.setValid(e.checkValid())},this.setEnabled=function(t){t!==e.enabled&&e.enabledSubject$.next(t)}}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this._errors},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this._valid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return!this._valid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return!this._enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueChange",{get:function(){return this.valueSubject$.asObservable().pipe(t(this.destroy$))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorsChange",{get:function(){return this.errorsSubject$.asObservable().pipe(t(this.destroy$))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabledChange",{get:function(){return this.enabledSubject$.asObservable().pipe(t(this.destroy$))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"validChange",{get:function(){return this.validSubject$.asObservable().pipe(t(this.destroy$))},enumerable:!1,configurable:!0}),e.prototype.initBasicParams=function(e){var t=e.value,n=e.disabled,r=void 0!==n&&n,o=e.validators;this.initValue(t),this.initValidators(o),this.initEnabled(!r),this.initErrors(h(t,o)),this.initValid(this.checkValid()),this.validChange.subscribe(this.updatePrivateValid),this.errorsChange.subscribe(this.updatePrivateErrors),this.enabledChange.subscribe(this.updatePrivateEnabledStatus),this.valueChange.subscribe(this.updatePrivateValue),this.valueChange.subscribe(this.validateAndUpdateErrors)},e}(),E=function(e){function t(t){var n=t.value,r=t.disabled,o=void 0!==r&&r,a=t.validators,i=void 0===a?[]:a,s=e.call(this)||this;return s.setValue=function(e){e!==s.value&&s.valueSubject$.next(e)},s.checkValid=function(){return!s.errors},s.initBasicParams({value:n,disabled:o,validators:i}),s}return v(t,e),t}(C);!function(e){function n(n){var s=n.controls,l=n.disabled,u=void 0!==l&&l,c=n.validators,b=void 0===c?[]:c,d=e.call(this)||this;return d.controlsSubject=new i,d.controlsChangeNotifyLock=!1,d.get=function(e){return d._controls[e]},d.setValue=function(e){e!==d.value&&(d.setValueToControls(e),d.valueSubject$.next(e))},d.addControl=function(e,t){var n,r=Object.assign({},d.controls,((n={})[e]=t,n));d.controlsSubject.next(r)},d.initControls=function(e){d._controls=e},d.setValueToControls=function(e){d.controlsChangeNotifyLock=!0,Object.keys(d._controls).forEach((function(t){var n=Object.prototype.hasOwnProperty.call(e,t);d._controls[t].setValue(n?e[t]:null)})),d.controlsChangeNotifyLock=!1},d.checkValid=function(){return!(d.errors||Object.values(d._controls).some((function(e){return e.invalid})))},d.updatePrivateControlsAndResetValue=function(e){d.updatePrivateControls(e),d.valueSubject$.next(d.getGroupValueFromControls())},d.updatePrivateControls=function(e){d._controls=e},d.getGroupValueFromControls=function(){var e={};return Object.keys(d._controls).forEach((function(t){var n=d._controls[t];n.enabled&&(e[t]=n.value)})),e},d.reSubscribeControls=function(){var e=Object.values(d._controls),t=e.map((function(e){return e.valueChange})),n=e.map((function(e){return e.validChange})),r=e.map((function(e){return e.enabledChange}));d.reSubscribeControlValueChanges(t),d.reSubscribeControlValidChanges(n),d.reSubscribeControlEnabledChanges(r)},d.reSubscribeControlValidChanges=function(e){d.validChangesSubscription&&d.validChangesSubscription.unsubscribe(),d.validChangesSubscription=r.apply(void 0,e).pipe(t(d.destroy$),o((function(){return d.controlsChangeNotifyLock})),a((function(){return d.checkValid()}))).subscribe(d.setValid)},d.reSubscribeControlEnabledChanges=function(e){d.enabledChangesSubscription&&d.enabledChangesSubscription.unsubscribe(),d.enabledChangesSubscription=r.apply(void 0,e).pipe(t(d.destroy$),o((function(){return d.controlsChangeNotifyLock})),a((function(){return d.getGroupValueFromControls()}))).subscribe((function(e){d.valueSubject$.next(e)}))},d.initControls(s),d.initBasicParams({value:d.getGroupValueFromControls(),disabled:u,validators:b}),d.controlsChange.subscribe(d.updatePrivateControlsAndResetValue),d.reSubscribeControls(),d}v(n,e),Object.defineProperty(n.prototype,"controls",{get:function(){return this._controls},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"controlsChange",{get:function(){return this.controlsSubject.asObservable().pipe(t(this.destroy$))},enumerable:!1,configurable:!0}),n.prototype.reSubscribeControlValueChanges=function(e){var n=this;this.valueChangesSubscription&&this.valueChangesSubscription.unsubscribe(),this.valueChangesSubscription=r.apply(void 0,e).pipe(t(this.destroy$),o((function(){return n.controlsChangeNotifyLock})),a((function(){return n.getGroupValueFromControls()}))).subscribe((function(e){n.valueSubject$.next(e)}))}}(C);const S=t=>{const n=t.value;return e.createElement(e.Fragment,null,e.createElement("input",{className:"form-control",value:n,onChange:e=>{t.setValue(e.target.value)}}),e.createElement("div",null,"value: ",JSON.stringify(t.value)),e.createElement("div",null,"invalid: ",JSON.stringify(t.invalid)),e.createElement("div",null,"errors: ",JSON.stringify(t.errors)),e.createElement("div",null,"disabled: ",JSON.stringify(t.disabled)))},j=()=>{const t=s.exports.useRef(new E({value:"vick"}));return e.createElement(e.Fragment,null,e.createElement("label",{className:"form-label"},"name"),e.createElement(m,{control:t.current},S))};function V(){return e.createElement("div",{className:"App"},e.createElement(l,null,e.createElement("div",null,e.createElement("nav",null,e.createElement("ul",null,e.createElement("li",null,e.createElement(u,{to:"/basic"},"basic")))),e.createElement(c,null,e.createElement(b,{path:"/basic"},e.createElement(j,null))))))}d.render(e.createElement(e.StrictMode,null,e.createElement(V,null)),document.getElementById("root"));
